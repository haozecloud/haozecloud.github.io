<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>原点独白</title>

  
    <meta name="description" content="Podman介绍Podman 是一个开源的容器运行时项目，可在大多数 Linux 平台上使用。Podman 提供与 Docker 非常相似的功能。正如前面提到的那样，它不需要在你的系统上运行任何守护进程，并且它也可以在没有 root 权限的情况下运行。Podman 可以管理和运行任何符合 OCI（Open Container Initiative）规范的容器和容器镜像。Podman 提供了一个与">
<meta property="og:type" content="article">
<meta property="og:title" content="原点独白">
<meta property="og:url" content="https://haozecloud.github.io/2023/07/11/Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/RHEL%20Podman%E5%91%BD%E4%BB%A4/index.html">
<meta property="og:site_name" content="原点独白">
<meta property="og:description" content="Podman介绍Podman 是一个开源的容器运行时项目，可在大多数 Linux 平台上使用。Podman 提供与 Docker 非常相似的功能。正如前面提到的那样，它不需要在你的系统上运行任何守护进程，并且它也可以在没有 root 权限的情况下运行。Podman 可以管理和运行任何符合 OCI（Open Container Initiative）规范的容器和容器镜像。Podman 提供了一个与">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-07-11T11:44:39.561Z">
<meta property="article:modified_time" content="2022-06-04T06:23:50.000Z">
<meta property="article:author" content="Zhang Hao Ze">
<meta name="twitter:card" content="summary">
  
  
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://img1.imgtp.com/2023/09/25/3pQ59aAI.png">
  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://img1.imgtp.com/2023/09/25/3pQ59aAI.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">原点独白</div><div class="sub cap">微信公众号</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/notes/">笔记</a><a class="nav-item" href="/images/">照片</a><a class="nav-item" href="/more/">日常</a></nav>
</header>


<div class="widgets">

<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">本文目录</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Podman-%E5%92%8Cdocker%E4%B8%8D%E5%90%8C%E4%B9%8B%E5%A4%84%EF%BC%9F"><span class="toc-text">Podman 和docker不同之处？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Podman%E5%AE%89%E8%A3%85"><span class="toc-text">Podman安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Podman%E5%91%BD%E4%BB%A4"><span class="toc-text">Podman命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-text">镜像管理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E6%90%9C%E7%B4%A2-podman-search"><span class="toc-text">镜像搜索 podman search</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E6%9F%A5%E7%9C%8B-podman-images"><span class="toc-text">本地镜像查看 podman images</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E4%BB%93%E5%BA%93%E9%95%9C%E5%83%8F%E6%8B%89%E5%8F%96-podman-pull-imange-name"><span class="toc-text">从仓库镜像拉取 podman pull [imange_name]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E5%88%A0%E9%99%A4-podman-rmi-IMAGE-ID-REPOSITORY"><span class="toc-text">本地镜像删除 podman rmi [IMAGE_ID|REPOSITORY]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E4%B8%8A%E4%BC%A0%E5%88%B0%E4%BB%93%E5%BA%93-podman-push"><span class="toc-text">镜像上传到仓库 podman push</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86%E7%BB%BC%E5%90%88%E5%91%BD%E4%BB%A4-podman-image"><span class="toc-text">镜像管理综合命令 podman image</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-text">容器管理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%9F%A5%E7%9C%8B-ps"><span class="toc-text">容器查看 ps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-run"><span class="toc-text">容器创建 run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E3%80%81%E5%85%B3%E9%97%AD%E3%80%81%E9%87%8D%E5%90%AF%E3%80%81%E6%9A%82%E5%81%9C%E3%80%81%E6%81%A2%E5%A4%8D"><span class="toc-text">容器启动、关闭、重启、暂停、恢复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%80%A7%E8%83%BD%E6%9F%A5%E7%9C%8B-top"><span class="toc-text">容器性能查看 top</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E8%BF%9E%E6%8E%A5-exec"><span class="toc-text">容器连接 exec</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E8%BF%9E%E6%8E%A5-attach"><span class="toc-text">容器连接 attach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%AE%B9%E5%99%A8%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F-export"><span class="toc-text">根据容器生成镜像 export</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E6%9B%B4%E6%94%B9%E8%BF%87%E7%9A%84%E5%AE%B9%E5%99%A8%E4%B8%BA%E9%95%9C%E5%83%8F-commit"><span class="toc-text">打包更改过的容器为镜像 commit</span></a></li></ol></div></div></widget>



<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" placeholder="站内搜索"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/08a41b181ce68.svg"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/3845874.svg"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/3616429.svg"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/942ebbf1a4b91.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-07-11T11:44:39.561Z">2023-07-11</time></div></div>

<article class='md-text content post'>

<h1 id="Podman介绍"><a href="#Podman介绍" class="headerlink" title="Podman介绍"></a>Podman介绍</h1><p>Podman 是一个开源的容器运行时项目，可在大多数 Linux 平台上使用。Podman 提供与 Docker 非常相似的功能。正如前面提到的那样，它不需要在你的系统上运行任何守护进程，并且它也可以在没有 root 权限的情况下运行。<br>Podman 可以管理和运行任何符合 OCI（Open Container Initiative）规范的容器和容器镜像。Podman 提供了一个与 Docker 兼容的命令行前端来管理 Docker 镜像。</p>
<blockquote>
<ol>
<li>Podman 官网地址：<a target="_blank" rel="noopener" href="https://podman.io/">https://podman.io/</a></li>
<li>Podman 项目地址：<a target="_blank" rel="noopener" href="https://github.com/containers/libpod">https://github.com/containers/libpod</a></li>
</ol>
</blockquote>
<h4 id="Podman-和docker不同之处？"><a href="#Podman-和docker不同之处？" class="headerlink" title="Podman 和docker不同之处？"></a>Podman 和docker不同之处？</h4><ol>
<li>docker 需要在我们的系统上运行一个守护进程(docker daemon)，而podman 不需要</li>
<li>启动容器的方式不同：<br> <code>docker cli</code> 命令通过API跟 <code>Docker Engine(引擎)</code>交互告诉它我想创建一个container，然后<code>docker Engine</code>才会调用<code>OCI container runtime(runc)</code>来启动一个container。这代表container的process(进程)不会是<code>Docker CLI</code>的<code>child process(子进程)</code>，而是<code>Docker Engine</code>的<code>child process</code>。<br> <code>Podman</code>是直接给<code>OCI containner runtime(runc)</code>进行交互来创建container的，所以<code>container process</code>直接是<code>podman</code>的<code>child process</code>。</li>
<li>因为docke有docker daemon，所以docker启动的容器支持<code>--restart</code>策略，但是podman不支持，如果在k8s中就不存在这个问题，我们可以设置pod的重启策略，在系统中我们可以采用编写systemd服务来完成自启动</li>
<li>docker需要使用root用户来创建容器，但是podman不需要</li>
</ol>
<h2 id="Podman安装"><a href="#Podman安装" class="headerlink" title="Podman安装"></a>Podman安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install podman</span><br></pre></td></tr></table></figure>

<h2 id="Podman命令"><a href="#Podman命令" class="headerlink" title="Podman命令"></a>Podman命令</h2><h3 id="镜像管理命令"><a href="#镜像管理命令" class="headerlink" title="镜像管理命令"></a>镜像管理命令</h3><h4 id="镜像搜索-podman-search"><a href="#镜像搜索-podman-search" class="headerlink" title="镜像搜索 podman search"></a>镜像搜索 podman search</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman search centos</span><br><span class="line">INDEX    NAME      DESCRIPTION           STARS   OFFICIAL   AUTOMATED                            </span><br><span class="line">Podman.io  Podman.io/blacklabelops/centos CentOS Base Image! Built and Updates Daily!       1                  [OK]        </span><br><span class="line"></span><br><span class="line">INDEX</span><br><span class="line">NAME     镜像名字</span><br><span class="line">DESCRIPTION	描述</span><br><span class="line">SATRS				星级  数字越大代表使用人数越多</span><br><span class="line">OFFICIAL		是否为官方镜像</span><br><span class="line">AUTOMATED		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">拓展知识：</span><br><span class="line">根据本地的/etc/containers/registries.conf文件中定义的去搜索</span><br><span class="line">#默认情况下，使用podman搜索从容器仓库中搜索镜像时，基于registries.conf文件，podman按顺序在registry.redhat.io、registry.access.redhat.com、quay.io和docker.io中查找请求的镜像。</span><br><span class="line">[registries.search]</span><br><span class="line">registries = [&#x27;registry.redhat.io&#x27;, &#x27;registry.access.redhat.com&#x27;, &#x27;quay.io&#x27;, &#x27;docker.io&#x27;]</span><br><span class="line"></span><br><span class="line">#要添加对不需要身份验证的容器仓库（不安全容器仓库）的访问，必须在[registries.Unsecure]部分下添加该容器仓库的名称。</span><br><span class="line">[registries.insecure] </span><br><span class="line">registries = []</span><br><span class="line"></span><br><span class="line">#要禁止从本地系统访问的任何容器仓库都需要添加到[registries.block]部分下。</span><br><span class="line">[registries.block] </span><br><span class="line">registries = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">关于配置容器容器仓库，您还应该了解以下几点：</span><br><span class="line">1、确保每个容器仓库都用单引号括起来。</span><br><span class="line">2、如果为registries=值设置了多个仓库，则必须用逗号分隔这些仓库。</span><br><span class="line">3、仓库可以通过IP地址或主机名来标识。</span><br><span class="line">4、如果仓库使用非标准端口（即，安全端口不是TCP端口443，不安全端口不是80），则应使用仓库名输入该端口号。例如：host.example.com:9999</span><br><span class="line">5、按照Registries.conf文件每个部分的显示顺序搜索仓库。</span><br><span class="line">6、如果您是运行podman和相关工具的普通用户（无根），则可以创建自己的registries.conf文件来覆盖默认设置。</span><br></pre></td></tr></table></figure>

<h4 id="本地镜像查看-podman-images"><a href="#本地镜像查看-podman-images" class="headerlink" title="本地镜像查看 podman images"></a>本地镜像查看 podman images</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman images</span><br><span class="line">REPOSITORY                    TAG      IMAGE ID       CREATED         SIZE</span><br><span class="line">Podman.io/blacklabelops/centos latest   73f5fb57a402   13 months ago   391 MB</span><br></pre></td></tr></table></figure>

<h4 id="从仓库镜像拉取-podman-pull-imange-name"><a href="#从仓库镜像拉取-podman-pull-imange-name" class="headerlink" title="从仓库镜像拉取 podman pull [imange_name]"></a>从仓库镜像拉取 podman pull [imange_name]</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman pull Podman.io/blacklabelops/centos</span><br><span class="line">Trying to pull Podman.io/blacklabelops/centos...Getting image source signatures</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.75 MiB / 69.96 MiB [=============================]</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.96 MiB / 69.96 MiB [=========================] 33s</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.96 MiB / 69.96 MiB [=========================] 33s</span><br><span class="line">Copying blob 9d438d3ad7e8: 61.22 MiB / 61.22 MiB [=========================] 33s</span><br><span class="line">Copying config 73f5fb57a402: 3.98 KiB / 3.98 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br></pre></td></tr></table></figure>

<h4 id="本地镜像删除-podman-rmi-IMAGE-ID-REPOSITORY"><a href="#本地镜像删除-podman-rmi-IMAGE-ID-REPOSITORY" class="headerlink" title="本地镜像删除 podman rmi [IMAGE_ID|REPOSITORY]"></a>本地镜像删除 podman rmi [IMAGE_ID|REPOSITORY]</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">方法一: podman rmi IMAGE_ID</span><br><span class="line">[root@node4 ~]# podman rmi 73f5fb57a402</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br><span class="line">方法二: podman rmi REPOSITORY</span><br><span class="line">[root@node4 ~]# podman rmi Podman.io/blacklabelops/centos</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br></pre></td></tr></table></figure>

<h4 id="镜像上传到仓库-podman-push"><a href="#镜像上传到仓库-podman-push" class="headerlink" title="镜像上传到仓库 podman push"></a>镜像上传到仓库 podman push</h4><h4 id="镜像管理综合命令-podman-image"><a href="#镜像管理综合命令-podman-image" class="headerlink" title="镜像管理综合命令 podman image"></a>镜像管理综合命令 podman image</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman image</span><br><span class="line">NAME:</span><br><span class="line">   podman image - Manage images</span><br><span class="line"></span><br><span class="line">USAGE:</span><br><span class="line">   podman image command [command options] [arguments...]</span><br><span class="line"></span><br><span class="line">COMMANDS:</span><br><span class="line">     build     Build an image using instructions from Podmanfiles</span><br><span class="line">     #根据Podmanfiles创建image</span><br><span class="line">     history   Show history of a specified image</span><br><span class="line">     #显示指定镜像的历史信息</span><br><span class="line">     import    Import a tarball to create a filesystem image</span><br><span class="line">     #导入一个文件系统压缩包</span><br><span class="line">     exists    Check if an image exists in local storage</span><br><span class="line">     #检查本地是否存在某个镜像</span><br><span class="line">     inspect   Displays the configuration of a container or image</span><br><span class="line">     #显示容器或镜像的详细信息</span><br><span class="line">     load      Load an image from Podman archive</span><br><span class="line">     #将镜像文件导入到镜像仓库</span><br><span class="line">     list, ls  list images in local storage</span><br><span class="line">     #列出本地存储中的镜像</span><br><span class="line">     prune     Remove unused images</span><br><span class="line">     #移除未使用的镜像</span><br><span class="line">     pull      Pull an image from a registry</span><br><span class="line">     #下载一个镜像到本地</span><br><span class="line">     push      Push an image to a specified destination</span><br><span class="line">     #上传一个镜像到仓库</span><br><span class="line">     rm        removes one or more images from local storage</span><br><span class="line">     #删除一个或多个本地镜像</span><br><span class="line">     save      Save image to an archive</span><br><span class="line">     #将一个镜像保存为一个镜像文件</span><br><span class="line">     tag       Add an additional name to a local image</span><br><span class="line">     #添加一个额外的名称给本地镜像</span><br><span class="line">     trust     Manage container image trust policy</span><br><span class="line">     #信任容器镜像</span><br><span class="line">     sign      Sign an image</span><br><span class="line">     #生成镜像签名，可以根据签名验证镜像的完整性</span><br><span class="line"></span><br><span class="line">OPTIONS:</span><br><span class="line">   --help, -h  show help</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">镜像历史信息</span><br><span class="line">[root@node4 ~]# podman image history 73f5fb57a402</span><br><span class="line">ID             CREATED         CREATED BY                                      SIZE      COMMENT</span><br><span class="line">73f5fb57a402   13 months ago   /bin/sh -c #(nop) LABEL maintainer=Steffen...   0B        </span><br><span class="line">&lt;missing&gt;      13 months ago   |1 BUILD_DATE=06/10/2018-01:06+0200 /bin/s...   64.2MB    </span><br><span class="line">&lt;missing&gt;      13 months ago   /bin/sh -c #(nop) ARG BUILD_DATE=undefined      64.2MB    </span><br><span class="line">&lt;missing&gt;      15 months ago   /bin/sh -c #(nop) CMD [&quot;/bin/bash&quot;]             64.2MB    </span><br><span class="line">&lt;missing&gt;      15 months ago   /bin/sh -c #(nop) LABEL name=CentOS Base I...   64.2MB    </span><br><span class="line">&lt;missing&gt;      15 months ago   /bin/sh -c #(nop) ADD file:d6a1da927f0b7a7...   73.36MB   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">镜像导入来自系统压缩包 导入时文件越大越慢</span><br><span class="line">[root@node4 ~]# podman image import centos8.tar</span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob 84d82847ae58: 1.29 GiB / 1.31 GiB [===============================]</span><br><span class="line">Copying blob 84d82847ae58: 1.31 GiB / 1.31 GiB [===========================] 14s</span><br><span class="line">Copying config 2d42f6c756bc: 419 B / 419 B [================================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">2d42f6c756bc02640bbb77319b5f1b3a2c51f70fd64d4919d8eb5c0d078c87a7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">监测本地镜像是否存在，结合$?</span><br><span class="line">[root@node4 ~]# podman image exists 2d42f6c756bc;echo $?</span><br><span class="line">0</span><br><span class="line">[root@node4 ~]# podman image exists 2d42f6c756bcxxxx;echo $?</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">镜像下载</span><br><span class="line">[root@node4 ~]# podman image pull Podman.io/blacklabelops/centos</span><br><span class="line">Trying to pull Podman.io/blacklabelops/centos...Getting image source signatures</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.92 MiB / 69.96 MiB [=============================]</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.96 MiB / 69.96 MiB [=========================] 23s</span><br><span class="line">Copying blob 18b8eb7e7f01: 69.96 MiB / 69.96 MiB [=========================] 24s</span><br><span class="line">Copying blob 9d438d3ad7e8: 61.22 MiB / 61.22 MiB [=========================] 24s</span><br><span class="line">Copying config 73f5fb57a402: 3.98 KiB / 3.98 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br><span class="line"></span><br><span class="line">镜像查看  list</span><br><span class="line">[root@node4 ~]# podman image list</span><br><span class="line">REPOSITORY                       TAG      IMAGE ID       CREATED         SIZE</span><br><span class="line">Podman.io/blacklabelops/centos   latest   73f5fb57a402   13 months ago   391 MB</span><br><span class="line"></span><br><span class="line">镜像查看  ls</span><br><span class="line">[root@node4 ~]# podman image ls</span><br><span class="line">REPOSITORY                       TAG      IMAGE ID       CREATED         SIZE</span><br><span class="line">Podman.io/blacklabelops/centos   latest   73f5fb57a402   13 months ago   391 MB</span><br><span class="line"></span><br><span class="line">镜像删除</span><br><span class="line">[root@node4 ~]# podman image rm 73f5fb57a402</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@node4 ~]# podman image tag 2d42f6c756bc tyschool_centos8_1905</span><br><span class="line">[root@node4 ~]# podman image list</span><br><span class="line">REPOSITORY                        TAG      IMAGE ID       CREATED       SIZE</span><br><span class="line">localhost/tyschool_centos8_1905   latest   2d42f6c756bc   5 hours ago   1.4 GB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">导出一个镜像到文件 -o output</span><br><span class="line">[root@node4 ~]# podman image save -o centos_7_base Podman.io/blacklabelops/centos</span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob 129b697f70e9: 194.43 MiB / 195.64 MiB [===========================]</span><br><span class="line">Copying blob 129b697f70e9: 195.64 MiB / 195.64 MiB [========================] 6s</span><br><span class="line">Copying blob 129b697f70e9: 195.64 MiB / 195.64 MiB [========================] 6s</span><br><span class="line">Copying blob a39553b46393: 177.41 MiB / 177.41 MiB [========================] 6s</span><br><span class="line">Copying config 73f5fb57a402: 3.98 KiB / 3.98 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">导入一个镜像文件到本地仓库   -i  input </span><br><span class="line">[root@node4 ~]# podman image load -i centos_7_base </span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob 129b697f70e9: 183.88 MiB / 195.64 MiB [=========================&gt;-]</span><br><span class="line">Copying blob a39553b46393: 171.16 MiB / 177.41 MiB [===========================]</span><br><span class="line">Copying blob 129b697f70e9: 195.64 MiB / 195.64 MiB [========================] 4s</span><br><span class="line">Copying blob a39553b46393: 177.41 MiB / 177.41 MiB [========================] 4s</span><br><span class="line">Copying config 73f5fb57a402: 3.98 KiB / 3.98 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">Loaded image(s): docker.io/blacklabelops/centos:latest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">删除未使用的镜像</span><br><span class="line">[root@node4 ~]# podman image prune --all</span><br><span class="line">2d42f6c756bc02640bbb77319b5f1b3a2c51f70fd64d4919d8eb5c0d078c87a7</span><br><span class="line">b9e394903cd716d89ca1fb6758bfa08dd6ec6a5966fa925c9cf58738062eba05</span><br><span class="line">73f5fb57a402c17df1a74ddb154c4d2e2cd30c366e224d9cb6087ab9c6339d58</span><br></pre></td></tr></table></figure>

<h3 id="容器管理命令"><a href="#容器管理命令" class="headerlink" title="容器管理命令"></a>容器管理命令</h3><h4 id="容器查看-ps"><a href="#容器查看-ps" class="headerlink" title="容器查看 ps"></a>容器查看 ps</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#显示开机容器</span><br><span class="line">[root@node4 ~]# podman ps   </span><br><span class="line">CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES</span><br><span class="line"></span><br><span class="line">#显示所有容器，包括没开机的</span><br><span class="line">[root@node4 ~]# podman ps -a</span><br><span class="line">CONTAINER ID  IMAGE                                    COMMAND    CREATED         STATUS                         PORTS  NAMES</span><br><span class="line">344ce4a0a6b4  localhost/tyschool_centos8_1905:latest   /bin/bash  54 seconds ago  Exited (0) 50 seconds ago             ty2</span><br><span class="line">78c97bb19bec  docker.io/mcnaughton/centos-base:latest  /bin/bash  3 minutes ago   Exited (0) About a minute ago         ty1</span><br></pre></td></tr></table></figure>

<h4 id="容器创建-run"><a href="#容器创建-run" class="headerlink" title="容器创建 run"></a>容器创建 run</h4><p>方法一：根据本地镜像创建容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman images</span><br><span class="line">REPOSITORY                         TAG      IMAGE ID       CREATED         SIZE</span><br><span class="line">localhost/tyschool_centos8_1905    latest   2d42f6c756bc   7 hours ago     1.4 GB</span><br><span class="line">docker.io/blacklabelops/centos     latest   73f5fb57a402   13 months ago   391 MB</span><br><span class="line">[root@node4 ~]# podman run -it -name ty2 localhost/tyschool_centos8_1905 /bin/bash</span><br><span class="line"></span><br><span class="line">-i 开启容器交互</span><br><span class="line">-t 分配一个TTY终端[假的]</span><br><span class="line"></span><br><span class="line">拓展</span><br><span class="line">--privileged  扩展容器权限</span><br></pre></td></tr></table></figure>

<p>方法二: 容器创建的时候，优先从本地仓库找镜像，本地没有就回去远程仓库拉取到本地</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">本地仓库没有镜像</span><br><span class="line">[root@node4 ~]# podman run --name ty1 -it docker.io/mcnaughton/centos-base /bin/bash</span><br><span class="line">Trying to pull docker.io/mcnaughton/centos-base...Getting image source signatures</span><br><span class="line">Copying blob a02a4930cb5d: 0 B / 71.68 MiB [-----------------------------------]</span><br><span class="line">Copying blob a02a4930cb5d: 30.30 MiB / 71.68 MiB [============&gt;----------------]</span><br><span class="line">Copying blob a02a4930cb5d: 71.27 MiB / 71.68 MiB [=============================]</span><br><span class="line">Copying blob a02a4930cb5d: 71.68 MiB / 71.68 MiB [=========================] 34s</span><br><span class="line">Copying blob a02a4930cb5d: 71.68 MiB / 71.68 MiB [=========================] 34s</span><br><span class="line">Copying blob f6168f316445: 23.45 MiB / 23.45 MiB [=========================] 34s</span><br><span class="line">Copying blob cf55ab518523: 99.57 MiB / 99.57 MiB [=========================] 34s</span><br><span class="line">Copying blob 68b1bf62d7e6: 1.19 KiB / 1.19 KiB [===========================] 34s</span><br><span class="line">Copying config b9e394903cd7: 4.99 KiB / 4.99 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br></pre></td></tr></table></figure>

<h4 id="容器启动、关闭、重启、暂停、恢复"><a href="#容器启动、关闭、重启、暂停、恢复" class="headerlink" title="容器启动、关闭、重启、暂停、恢复"></a>容器启动、关闭、重启、暂停、恢复</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#启动容器  start</span><br><span class="line">[root@node4 ~]# podman start ty1</span><br><span class="line">ty1</span><br><span class="line">查看容器开启了</span><br><span class="line">[root@node4 ~]# podman ps</span><br><span class="line">CONTAINER ID  IMAGE                                    COMMAND    CREATED        STATUS            PORTS  NAMES</span><br><span class="line">78c97bb19bec  docker.io/mcnaughton/centos-base:latest  /bin/bash  4 minutes ago  Up 5 seconds ago         ty1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#关闭容器  stop</span><br><span class="line">[root@node4 ~]# podman stop ty1</span><br><span class="line">78c97bb19bec488b8bf5a6f68cdff9ecc20980b3c2c9e2d4c56a0946f539bd02</span><br><span class="line">查看容器关闭了</span><br><span class="line">[root@node4 ~]# podman ps</span><br><span class="line">CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES</span><br><span class="line"></span><br><span class="line">#重启容器  restart</span><br><span class="line">[root@node4 ~]# podman restart ty1</span><br><span class="line">78c97bb19bec488b8bf5a6f68cdff9ecc20980b3c2c9e2d4c56a0946f539bd02</span><br><span class="line">[root@node4 ~]# </span><br><span class="line">[root@node4 ~]# podman ps</span><br><span class="line">CONTAINER ID  IMAGE                                    COMMAND    CREATED        STATUS            PORTS  NAMES</span><br><span class="line">78c97bb19bec  docker.io/mcnaughton/centos-base:latest  /bin/bash  6 minutes ago  Up 2 seconds ago         ty1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#暂停容器  pause</span><br><span class="line">[root@node4 ~]# podman pause ty1</span><br><span class="line">78c97bb19bec488b8bf5a6f68cdff9ecc20980b3c2c9e2d4c56a0946f539bd02</span><br><span class="line">查看状态</span><br><span class="line">[root@node4 ~]# podman ps -a</span><br><span class="line">CONTAINER ID  IMAGE                                    COMMAND    CREATED        STATUS                    PORTS  NAMES</span><br><span class="line">344ce4a0a6b4  localhost/tyschool_centos8_1905:latest   /bin/bash  4 minutes ago  Exited (0) 4 minutes ago         ty2</span><br><span class="line">78c97bb19bec  docker.io/mcnaughton/centos-base:latest  /bin/bash  6 minutes ago  Paused                           ty1</span><br><span class="line"></span><br><span class="line">#恢复暂停容器  unpause</span><br><span class="line">[root@node4 ~]# podman unpause ty1</span><br><span class="line">78c97bb19bec488b8bf5a6f68cdff9ecc20980b3c2c9e2d4c56a0946f539bd02</span><br><span class="line">查看状态</span><br><span class="line">[root@node4 ~]# podman ps </span><br><span class="line">CONTAINER ID  IMAGE                                    COMMAND    CREATED        STATUS             PORTS  NAMES</span><br><span class="line">78c97bb19bec  docker.io/mcnaughton/centos-base:latest  /bin/bash  6 minutes ago  Up 25 seconds ago         ty1</span><br></pre></td></tr></table></figure>

<h4 id="容器性能查看-top"><a href="#容器性能查看-top" class="headerlink" title="容器性能查看 top"></a>容器性能查看 top</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">podman top 容器名称</span><br><span class="line"></span><br><span class="line">[root@node4 ~]# podman top ty1</span><br><span class="line">USER   PID   PPID   %CPU    ELAPSED          TTY     TIME   COMMAND</span><br><span class="line">root   1     0      0.000   6m9.377354027s   pts/0   0s     /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="容器连接-exec"><a href="#容器连接-exec" class="headerlink" title="容器连接 exec"></a>容器连接 exec</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">连接一个运行容器，执行/bin/bash命令</span><br><span class="line">[root@node4 ~]# podman exec -it ty1 /bin/bash</span><br><span class="line">[root@78c97bb19bec /]# </span><br></pre></td></tr></table></figure>

<h4 id="容器连接-attach"><a href="#容器连接-attach" class="headerlink" title="容器连接 attach"></a>容器连接 attach</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将一个运行容器的标准输出、标准错误输出、标准输入调到前台</span><br><span class="line">[root@node4 ~]# podman attach ty1</span><br><span class="line">[root@78c97bb19bec /]# </span><br></pre></td></tr></table></figure>

<h4 id="根据容器生成镜像-export"><a href="#根据容器生成镜像-export" class="headerlink" title="根据容器生成镜像 export"></a>根据容器生成镜像 export</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman export -o ty1.tar ty1</span><br><span class="line"></span><br><span class="line">[root@node4 ~]# podman import  ty1.tar  baism:ty1</span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob 854836d1c5c3: 491.28 MiB / 505.18 MiB [===========================]</span><br><span class="line">Copying blob 854836d1c5c3: 505.18 MiB / 505.18 MiB [========================] 5s</span><br><span class="line">Copying config 25581780c97b: 419 B / 419 B [================================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">25581780c97b41ed62e0d6a9e41f8725cfaa93653e32adbb65369d3e527d235c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">podman import  ty1.tar  baism:ty1</span><br><span class="line"></span><br><span class="line">baism:ty1 自定义仓库的名称:标签</span><br></pre></td></tr></table></figure>

<h4 id="打包更改过的容器为镜像-commit"><a href="#打包更改过的容器为镜像-commit" class="headerlink" title="打包更改过的容器为镜像 commit"></a>打包更改过的容器为镜像 commit</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node4 ~]# podman commit ty1 baism:latest</span><br><span class="line">Getting image source signatures</span><br><span class="line">Skipping blob 071d8bd76517 (already present): 200.44 MiB / 200.44 MiB [=====] 0s</span><br><span class="line">Skipping blob 3c8ab5053a82 (already present): 57.01 MiB / 57.01 MiB [=======] 0s</span><br><span class="line">Skipping blob ba3cdff1294c (already present): 286.14 MiB / 286.14 MiB [=====] 0s</span><br><span class="line">Skipping blob e25e400e5c38 (already present): 28.50 KiB / 28.50 KiB [=======] 0s</span><br><span class="line">Skipping blob 071d8bd76517 (already present): 200.44 MiB / 200.44 MiB [=====] 1s</span><br><span class="line">Skipping blob 071d8bd76517 (already present): 200.44 MiB / 200.44 MiB [=====] 1s</span><br><span class="line">Skipping blob 3c8ab5053a82 (already present): 57.01 MiB / 57.01 MiB [=======] 1s</span><br><span class="line">Skipping blob ba3cdff1294c (already present): 286.14 MiB / 286.14 MiB [=====] 1s</span><br><span class="line">Skipping blob e25e400e5c38 (already present): 28.50 KiB / 28.50 KiB [=======] 1s</span><br><span class="line">Copying blob 83e9209f930c: 114.44 MiB / 114.44 MiB [========================] 1s</span><br><span class="line">Copying config d558217acef1: 4.08 KiB / 4.08 KiB [==========================] 0s</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">d558217acef109e465d5ce65d60de7c8619cc3c8cbbcde57e418555516ba3ec0</span><br></pre></td></tr></table></figure>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2023/07/11/Kubernetes%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%9E%E6%88%98/Harbor%20%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/">2023-07-11</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2023/07/11/Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/Docker%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86/">2023-07-11</a></div></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
