<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>linux服务管理 - 原点独白</title>

  
    <meta name="description" content="systemctl命令管理服务我们一起来看一下在服务管理方面systemctl这个工具如何使用 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808">
<meta property="og:type" content="article">
<meta property="og:title" content="linux服务管理">
<meta property="og:url" content="https://haozecloud.github.io/2023/09/27/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/Linux-%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="原点独白">
<meta property="og:description" content="systemctl命令管理服务我们一起来看一下在服务管理方面systemctl这个工具如何使用 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-09-27T00:03:55.000Z">
<meta property="article:modified_time" content="2023-09-27T12:03:56.365Z">
<meta property="article:author" content="Zhang Hao Ze">
<meta name="twitter:card" content="summary">
  
  
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/原点独白-2023-10-04.png">
  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/原点独白-2023-10-04.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">原点独白</div><div class="sub cap">微信公众号</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/images/">照片</a><a class="nav-item" href="/more/">日常</a></nav>
</header>


<div class="widgets">

<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">linux服务管理</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#systemctl%E5%91%BD%E4%BB%A4"><span class="toc-text">systemctl命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1"><span class="toc-text">管理服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1"><span class="toc-text">查看服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E4%B8%8E%E7%AB%AF%E5%8F%A3"><span class="toc-text">服务与端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6"><span class="toc-text">服务设置相关文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="toc-text">服务多实例</span></a></li></ol></li></ol></div></div></widget>



<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" placeholder="站内搜索"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://pd.qq.com/s/77potx4h8" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/QQ-2023-09-29.svg"/></a><a class="social" href="https://i.y.qq.com/n2/m/share/details/taoge.html?platform=11&appshare=android_qq&appversion=12070008&hosteuin=oinFoK4soe-lNn**&id=3144152480&ADTAG=wxfshare" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/qq音乐-2023-09-29.svg"/></a><a class="social" href="https://www.cnblogs.com/mant" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/linux-2023-09-29.svg"/></a><a class="social" href="https://alidocs.dingtalk.com/i/p/O5pXBPdVlgnMQG7Z" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/钉钉-2023-09-29.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/Linux/">Linux</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/">Linux系统管理宝典</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-09-27T00:03:55.000Z">2023-09-27</time></div></div>

<article class='md-text content post'>
<h1 class="article-title"><span>linux服务管理</span></h1>
<h2 id="systemctl命令"><a href="#systemctl命令" class="headerlink" title="systemctl命令"></a>systemctl命令</h2><h3 id="管理服务"><a href="#管理服务" class="headerlink" title="管理服务"></a>管理服务</h3><p>我们一起来看一下在服务管理方面systemctl这个工具如何使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# systemctl start servername</span><br><span class="line">start            	启动服务</span><br><span class="line">stop             	停止服务</span><br><span class="line">restart          	重启服务(没启动的服务会启动)</span><br><span class="line">try-restart		只重启正在运行的服务(没有运行则不启动)</span><br><span class="line">reload          	重载配置文件(修改完服务的配置文件后使用)</span><br><span class="line">status         	 	检查服务状态</span><br><span class="line">is-active        	检查服务是否已经启动</span><br><span class="line">enable          	设置服务开机时启动</span><br><span class="line">disable          	设置服务开机时不启动</span><br><span class="line">is-enabled       	查看服务是否开机自动启动</span><br><span class="line">mask		        屏蔽一个服务</span><br><span class="line">unmask		        取消屏蔽</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl status httpd</span><br><span class="line">● httpd.service - The Apache HTTP Server		服务名称</span><br><span class="line">   Loaded: loaded	加载到内存中；error加载失败；bad-setting无法理解单元配置文件中的设置；masked被屏蔽	 	(/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled) 服务开机时是否启动 enabled为启动；disabled为不启动</span><br><span class="line">   Active: active (running) since Mon 2019-11-18 15:56:46 CST; 1h 11min ago		服务当前的状态，active(running)为运行；active(exited)运行一次就退出了；active(waiting)运行中，但是再等待其它程序结束才能继续；inactive(dead)为没有运行；activating为启动中，deactivating停止中；failed启动失败</span><br><span class="line">     Docs: man:httpd.service(8)	服务的帮助文档	</span><br><span class="line"> Main PID: 57779 (httpd)	服务的主进程号</span><br><span class="line">   Status: &quot;Running, listening on: port 80&quot; 额外的状态信息</span><br><span class="line">    Tasks: 213 (limit: 24882) 任务数量，含进程+线程</span><br><span class="line">   Memory: 22.4M		当前占用的内存</span><br><span class="line">   CGroup: /system.slice/httpd.service</span><br><span class="line">           ├─57779 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57780 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57781 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─57782 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           └─57783 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">		Control Groups额外信息</span><br><span class="line">11月 18 15:56:46 localhost.localdomain systemd[1]: Starting The Apache HTTP Server...</span><br><span class="line">11月 18 15:56:46 localhost.localdomain httpd[57779]: AH00558: httpd: Could not reliably determ&gt;</span><br><span class="line">11月 18 15:56:46 localhost.localdomain httpd[57779]: Server configured, listening on: port 80</span><br><span class="line">11月 18 15:56:46 localhost.localdomain systemd[1]: Started The Apache HTTP Server.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line">[root@zutuanxue ~]# systemctl is-active atd	</span><br><span class="line">inactive</span><br><span class="line">[root@zutuanxue ~]# systemctl start atd</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2019-11-18 18:36:26 CST; 7s ago</span><br><span class="line"> Main PID: 60620 (atd)</span><br><span class="line">    Tasks: 1 (limit: 24882)</span><br><span class="line">   Memory: 504.0K</span><br><span class="line">   CGroup: /system.slice/atd.service</span><br><span class="line">           └─60620 /usr/sbin/atd -f</span><br><span class="line"></span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl stop atd</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead) since Mon 2019-11-18 18:36:43 CST; 6s ago</span><br><span class="line">  Process: 60620 ExecStart=/usr/sbin/atd -f $OPTS (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 60620 (code=exited, status=0/SUCCESS)</span><br><span class="line"></span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">enabled</span><br><span class="line">[root@zutuanxue ~]# systemctl disable atd</span><br><span class="line">Removed /etc/systemd/system/multi-user.target.wants/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">disabled</span><br><span class="line">[root@zutuanxue ~]# systemctl enable atd</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/atd.service → /usr/lib/systemd/system/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl is-enabled atd</span><br><span class="line">enabled</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl stop atd</span><br><span class="line">[root@zutuanxue ~]# systemctl mask atd</span><br><span class="line">Created symlink /etc/systemd/system/atd.service → /dev/null.</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service</span><br><span class="line">   Loaded: masked (Reason: Unit atd.service is masked.)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line"></span><br><span class="line">11月 05 18:12:41 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">[root@zutuanxue ~]# systemctl unmask atd</span><br><span class="line">Removed /etc/systemd/system/atd.service.</span><br><span class="line">[root@zutuanxue ~]# systemctl status atd</span><br><span class="line">● atd.service - Job spooling tools</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/atd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line"></span><br><span class="line">11月 05 18:12:41 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:34:15 localhost.localdomain systemd[1]: Stopped Job spooling tools.</span><br><span class="line">11月 18 18:36:26 localhost.localdomain systemd[1]: Started Job spooling tools.</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopping Job spooling tools...</span><br><span class="line">11月 18 18:36:43 localhost.localdomain systemd[1]: Stopped Job spooling tools</span><br></pre></td></tr></table></figure>

<h3 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]#systemctl command --type=xxx --all</span><br><span class="line">list-units				查看所有加载到内存中的单元				</span><br><span class="line">list-unit-files	查看系统中所有安装的单元文件（存放在/usr/lib/systemd/system）的启用状态</span><br><span class="line">--type=xxx			单元类型</span><br><span class="line">--all						列出系统中所有加载的，不管状态为何</span><br><span class="line">[root@zutuanxue ~]# systemctl </span><br><span class="line">UNIT	LOAD   ACTIVE SUB       DESCRIPTION                                                      </span><br><span class="line">sys.. loaded active plugged 	/sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line">sys.. loaded active plugged   /sys.....</span><br><span class="line"></span><br><span class="line">UNIT：	单元名称</span><br><span class="line">LOAD：	是否被加载</span><br><span class="line">ACTIVE：	高优先级单元状态，与SUB结合就是使用status查看的状态</span><br><span class="line">SUB：	低优先级单元状态		</span><br><span class="line">DESCRIPTION：简介</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl list-unit-files </span><br><span class="line">UNIT	FILE					STATE    </span><br><span class="line">proc...     				static </span><br><span class="line">-.mount							generated</span><br><span class="line">boot.mount					generated</span><br><span class="line">dev-hugepages.mount	static   </span><br><span class="line">dev-mqueue.mount	  static   </span><br><span class="line">proc-fs-nfsd.mount	static   </span><br><span class="line">proc-...            static   </span><br><span class="line">sys-f...            static   </span><br><span class="line">sys-...						  static   </span><br><span class="line">sys-ke..            static   </span><br><span class="line">tmp.mount						static   </span><br><span class="line">var-lib..						static   </span><br><span class="line">var-lib..						static   </span><br><span class="line">cups.path..					enabled  </span><br><span class="line">systemd..						static</span><br><span class="line"></span><br><span class="line">查看指定类型的服务</span><br><span class="line">[root@zutuanxue ~]# systemctl --type target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...      </span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target                  </span><br><span class="line">[root@zutuanxue ~]# systemctl --type=target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...</span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --type=target --all</span><br><span class="line">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target              loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target          loaded    active   active Bluetooth                    </span><br><span class="line">  cryptsetup.target         loaded    active   active Local...</span><br><span class="line">● dbus.target               not-found inactive dead   dbus.target                  </span><br><span class="line"></span><br><span class="line">使用systemctl切换运行级别</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --type target --all</span><br><span class="line">  UNIT                   LOAD      ACTIVE   SUB    DESCRIPTION                  </span><br><span class="line">  basic.target           loaded    active   active Basic System                 </span><br><span class="line">  bluetooth.target       loaded    inactive dead   Bluetooth                    </span><br><span class="line">  cryptsetup.target      loaded    active   active Local ..</span><br><span class="line">● dbus.target            not-found inactive dead   dbus.target                  </span><br><span class="line">  emergency.target       loaded    inactive dead   Emergency Mode               </span><br><span class="line">  getty-pre.target       loaded    inactive dead   Login..</span><br><span class="line">  getty.target           loaded    active   active Login Prompts                </span><br><span class="line">  graphical.target       loaded    inactive dead   Graphica..Interface          </span><br><span class="line">常用的target</span><br><span class="line">graphical.target：图形模式</span><br><span class="line">multi-user.target：字符模式</span><br><span class="line">rescue.target：救援模式</span><br><span class="line">emergency.target：紧急模式，无法进入到救援模式时使用</span><br><span class="line">shutdown.target：关机</span><br><span class="line"></span><br><span class="line">[root@zutuanxue ~]# systemctl get-default	查看默认运行级别</span><br><span class="line">graphical.target     </span><br><span class="line">[root@zutuanxue ~]# systemctl set-default multi-user.target	设置 </span><br><span class="line">Removed /etc/systemd/system/default.target.</span><br><span class="line">Created symlink /etc/systemd/system/default.target → /usr/lib/systemd/system/multi-user.target.</span><br><span class="line">[root@zutuanxue ~]# systemctl isolate multi-user.target 切换</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">除了可以使用上述方法设置和查看之外 系统还给我们提供了几个简单的命令，方便操作</span><br><span class="line">[root@zutuanxue ~]# systemctl poweroff		关机</span><br><span class="line">[root@zutuanxue ~]# systemctl reboot			重启</span><br><span class="line">[root@zutuanxue ~]# systemctl suspend			挂起</span><br><span class="line">[root@zutuanxue ~]# systemctl hibernate		休眠</span><br><span class="line">[root@zutuanxue ~]# systemctl rescue			进入到救援模式</span><br><span class="line">[root@zutuanxue ~]# systemctl emergency		进入到紧急模式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看服务之间的依赖关系</span><br><span class="line">[root@zutuanxue ~]# systemctl list-dependencies multi-user.target</span><br><span class="line">查看multi-user.target依赖谁</span><br><span class="line">multi-user.target</span><br><span class="line">● ├─atd.service</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">● ├─basic.target</span><br><span class="line">● │ ├─-.mount</span><br><span class="line">● │ ├─microcode.service</span><br><span class="line">● │ ├─paths.target</span><br><span class="line">● │ ├─slices.target</span><br><span class="line">● │ │ ├─-.slice</span><br><span class="line">● │ │ └─system.slice</span><br><span class="line">● │ ├─sockets.target</span><br><span class="line">● │ │ ├─avahi-daemon.socket</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">[root@zutuanxue ~]# systemctl list-dependencies multi-user.target --reverse 	查看谁依赖multi-user.target</span><br><span class="line">multi-user.target</span><br><span class="line">● └─graphical.target</span><br></pre></td></tr></table></figure>

<h3 id="服务与端口"><a href="#服务与端口" class="headerlink" title="服务与端口"></a>服务与端口</h3><p> 我们知道在服务中分为系统服务和网络服务，系统服务是本机使用的，网络服务是给网络中的其它客户端使用的，那其它客户端是如何连接上的网络服务的呢？端口和协议，协议在我们之前的课程中了解过，那端口是什么呢？</p>
<p>端口：设备与外界通讯的出口，分为虚拟端口和物理端口，物理端口又叫接口，比如电脑中可以插网线的RJ45接口等,而虚拟端口指的就是网络服务使用的通讯接口，是不可见的，这些每个虚拟端口都有一个编号，我们称之为端口号，系统当中有一个文件记录的服务和端口号以及协议的对应关系</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# cat /etc/services  | more</span><br><span class="line">服务名称				端口号/协议				描述			</span><br><span class="line">ftp-data        20/tcp</span><br><span class="line">ftp-data        20/udp</span><br><span class="line"># 21 is registered to ftp, but also used by fsp</span><br><span class="line">ftp             21/tcp</span><br><span class="line">ftp             21/udp          fsp fspd</span><br><span class="line">ssh             22/tcp                          </span><br><span class="line">ssh             22/udp                         </span><br><span class="line">telnet          23/tcp</span><br><span class="line">telnet          23/udp</span><br><span class="line"></span><br><span class="line">我们还可以使用netstat工具去查看自己的系统打开了哪些端口</span><br><span class="line">[root@zutuanxue ~]# netstat -antulp</span><br><span class="line">a			查看所有服务以及对应的端口号</span><br><span class="line">n			将输出结果以数字的形式表示，而不是主机名，服务名等</span><br><span class="line">t			使用tcp协议</span><br><span class="line">u			使用udp协议</span><br><span class="line">l			只显示处于监听状态的</span><br><span class="line">p			显示程序的名称与进程号</span><br><span class="line">c			指定自动更新的间隔时间  秒</span><br><span class="line">r			查看路由表信息</span><br><span class="line">[root@zutuanxue ~]# netstat -antlup </span><br><span class="line">Proto：协议</span><br><span class="line">Recv-Q：接收队列，如果接收队列阻塞，可能是受到拒绝服务攻击								</span><br><span class="line">Send-Q：发送队列，如果发送队列不能很快清零，可能是有应用向外发送数据包过快，或者对方接收数据包不够快</span><br><span class="line">Recv-Q和Send-Q通常应该为0，如果不为0可能意味着有问题，数据包有堆积状态，可以接受短暂的非0状态</span><br><span class="line">Local Address：本地的地址和端口号</span><br><span class="line">Foreign Address：	外部地址和状态</span><br><span class="line">State：						端口状态</span><br><span class="line">			 CLOSED 			端口未被使用中。</span><br><span class="line">			 LISTEN 			监听中，可以连接</span><br><span class="line">			 SYN_SEND   	处在TCP三次握手期间，已经发送SYN包后，等待对方的ACK包。</span><br><span class="line">       SYN_RECV   	处在TCP三次握手期间，已经收到SYN包后，进入SYN_RECV状态。</span><br><span class="line">       ESTABLISHED	完成TCP三次握手，进入ESTABLISHED状态。可以进行通信。</span><br><span class="line">       FIN_WAIT_1   在TCP四次挥手时，主动关闭端发送FIN包后，进入此状态。</span><br><span class="line">       FIN_WAIT_2   在TCP四次挥手时，主动关闭端收到ACK包后，进入此状态。</span><br><span class="line">       TIME_WAIT    在TCP四次挥手时，主动关闭端发送了ACK包之后，进入此状态，</span><br><span class="line">       							等待一段时间，让被动关闭端收到ACK包。</span><br><span class="line">       CLOSING      在TCP四次挥手时，主动关闭端发送了FIN包后，没有收到对应的ACK										包，却收到对方的FIN包，此时，进入CLOSING状态。</span><br><span class="line">       CLOSE_WAIT   在TCP四次挥手期间，被动关闭端收到FIN包后，进入此状态。</span><br><span class="line">       LAST_ACK     在TCP四次挥手时，被动关闭端发送FIN包后，等待对方的ACK包。</span><br><span class="line">       UNKNOWN			未知状态</span><br><span class="line">PID/Program name： 进程号/程序名称</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">通过netstat命令可以看到自己的linux系统打开了哪些服务及端口号，如果有些端口不想被占用可以关闭相应的网络服务</span><br><span class="line">[root@zutuanxue ~]# systemctl list-units --all | grep avahi</span><br><span class="line">avahi-daemon.service loaded active running Avahi mDNS/DNS-SD Stack                                                                                          </span><br><span class="line">avahi-daemon.socket loaded active running Avahi mDNS/DNS-SD Stack Activation Socket                                                                        </span><br><span class="line">可以看到这个服务的作用是为内网提供域名解析的</span><br><span class="line">[root@zutuanxue ~]# systemctl stop avahi-daemon.service </span><br><span class="line">Warning: Stopping avahi-daemon.service, but it can still be activated by:</span><br><span class="line">  avahi-daemon.socket</span><br><span class="line">[root@zutuanxue ~]# systemctl stop avahi-daemon.socket                   </span><br><span class="line">[root@zutuanxue ~]# systemctl disable avahi-daemon.service avahi-daemon.socket </span><br><span class="line">Removed /etc/systemd/system/multi-user.target.wants/avahi-daemon.service.</span><br><span class="line">Removed /etc/systemd/system/sockets.target.wants/avahi-daemon.socket.</span><br><span class="line">Removed /etc/systemd/system/dbus-org.freedesktop.Avahi.service.</span><br></pre></td></tr></table></figure>

<h3 id="服务设置相关文件"><a href="#服务设置相关文件" class="headerlink" title="服务设置相关文件"></a>服务设置相关文件</h3><p>我们现在知道了服务的管理是通过systemctl，而它的设置文件存放在&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;目录下，但是官方不建议我们修改这个目录下的文件，如果需要修改的话，建议我们修改&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;目录内的相关文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue ~]# yum install dhcp-server</span><br><span class="line">[root@zutuanxue ~]# systemctl enable dhcpd</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/dhcpd.service → /usr/lib/systemd/system/dhcpd.service.</span><br><span class="line">[root@zutuanxue ~]# cd /etc/systemd/system/</span><br><span class="line">[root@zutuanxue system]# ls</span><br><span class="line">在此目录中包含的文件有三种功能</span><br><span class="line">*.service  服务的设置文件</span><br><span class="line">*.wants	  此单元可选的依赖，启动指定单元后，建议启动此目录内的单元</span><br><span class="line">*.requires			此单元必要的依赖，启动指定单元前，需要启动此目录内的单元</span><br><span class="line"></span><br><span class="line">服务的设置文件</span><br><span class="line">[root@zutuanxue system]# vim /etc/systemd/system/multi-user.target.wants/dhcpd.service </span><br><span class="line"></span><br><span class="line">[Unit]		对于此单元的简介</span><br><span class="line">Description=DHCPv4 Server Daemon</span><br><span class="line">Documentation=man:dhcpd(8) man:dhcpd.conf(5)</span><br><span class="line">Wants=network-online.target	</span><br><span class="line">After=network-online.target</span><br><span class="line">After=time-sync.target</span><br><span class="line"></span><br><span class="line">Unit部分会出现的常见内容</span><br><span class="line">	Description			简介</span><br><span class="line">	Documentation		如何进一步查询相关信息</span><br><span class="line">	Wants						与当前单元配合的单元，如果这些单元没有运行，此单元不会启动失败</span><br><span class="line">	After						在哪些单元之后启动此单元</span><br><span class="line">	Befor						在哪些单元之前启动此单元</span><br><span class="line">	Requires				当前单元依赖的单元，如果这些单元没有运行，此单元启动失败</span><br><span class="line">	Conflicts				哪些单元与此单元冲突</span><br><span class="line">[Service]	这是一个服务还可能是Socket、Timer、Mount等</span><br><span class="line">Type=notify</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/dhcpd</span><br><span class="line">ExecStart=/usr/sbin/dhcpd -f -cf /etc/dhcp/dhcpd.conf -user dhcpd -group dhcpd --no-pid $DHCPDARGS</span><br><span class="line">StandardError=null</span><br><span class="line"></span><br><span class="line">Service部分会出现的内容</span><br><span class="line">	Type			启动时，相关进程的行为</span><br><span class="line">			simple		默认值</span><br><span class="line">			oneshot		一次性进程，systemd会等待当前服务结束，再继续执行</span><br><span class="line">			notify		启动完毕后通知systemd</span><br><span class="line">			idle		所有其它任务执行完毕后，此服务才会运行</span><br><span class="line">	EnviromentFile	指定环境变量配置文件</span><br><span class="line">	Enviroment	指定环境变量</span><br><span class="line">	ExecStart	执行什么命令启动当前服务</span><br><span class="line">	ExecStartPre	启动当前服务之前执行什么命令</span><br><span class="line">	ExecStartPost	启动当前服务之后执行什么命令</span><br><span class="line">	ExecStop	执行什么命令停止当前服务</span><br><span class="line">	ExecStopPost	停止当前服务后执行什么命令</span><br><span class="line">	ExecReload	执行什么命令重新加载服务的配置文件</span><br><span class="line">	Restart		服务正常退出、异常退出、被杀死、超时的时候是否重启。常用值</span><br><span class="line">			no				不重启</span><br><span class="line">			always		无条件重启</span><br><span class="line">			on-failure	异常退出时重启</span><br><span class="line">	RestartSec	自动重启服务的间隔时间</span><br><span class="line">	RemainAfterExit	此服务的进程全部退出之后，是否依然将服务的状态视为active状态</span><br><span class="line">	TimeoutSec	定义服务启动或停止的超时时间</span><br><span class="line">	KillMode	服务停止时，杀死进程的方法</span><br><span class="line">	</span><br><span class="line">[Install]	将此单元放到哪一个目标（target）当中</span><br><span class="line">WantedBy=multi-user.target	此服务所在的target，当执行systemctl enabled dhcpd时，dhcpd.service的链接会放在/etc/systemd/system/multi-user.target.wants/中</span><br><span class="line"></span><br><span class="line">Install字段出现的内容</span><br><span class="line">WantedBy=multi-user.target	此服务所在的target，当执行systemctl 																			enabled dhcpd时，dhcpd.service的链接会放																	在/etc/systemd/system/multi-user.target.wants/中Also附加单元，当用户使用systemctl enable/disabled时，也自动启用或者停用附加单元</span><br><span class="line">Alias		定义别名</span><br></pre></td></tr></table></figure>

<h3 id="服务多实例"><a href="#服务多实例" class="headerlink" title="服务多实例"></a>服务多实例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@zutuanxue yum.repos.d]# dnf install vsftpd -y		安装一个服务</span><br><span class="line">[root@zutuanxue yum.repos.d]# systemctl start vsftpd</span><br><span class="line">[root@zutuanxue yum.repos.d]# netstat -antulp | grep vsftpd</span><br><span class="line">tcp6       0      0 :::21      :::*     LISTEN      6331/vsftpd         </span><br><span class="line">[root@zutuanxue yum.repos.d]# cd /etc/systemd/system/</span><br><span class="line">[root@zutuanxue system]# cp /usr/lib/systemd/system/vsftpd.service ./vsftpd2.service</span><br><span class="line">[root@zutuanxue system]# cd /etc/vsftpd/</span><br><span class="line">[root@zutuanxue vsftpd]# cp vsftpd.conf vsftpd2.conf</span><br><span class="line">[root@zutuanxue vsftpd]# vim vsftpd2.conf </span><br><span class="line">listen_port=2100</span><br><span class="line"></span><br><span class="line">[root@zutuanxuet vsftpd]# vim /etc/systemd/system/vsftpd2.service </span><br><span class="line">[Unit]</span><br><span class="line">Description=the second Vsftpd ftp daemon			修改简介</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/sbin/vsftpd /etc/vsftpd/vsftpd2.conf		修改配置文件</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">[root@zutuanxue system]# systemctl list-unit-files  | grep vsftpd</span><br><span class="line">vsftpd.service                              disabled </span><br><span class="line">vsftpd2.service                             disabled </span><br><span class="line">vsftpd@zutuanxue.service                    indirect </span><br><span class="line">vsftpd.target                               disabled </span><br><span class="line">[root@zutuanxue system]# systemctl start vsftpd</span><br><span class="line">[root@zutuanxue system]# systemctl start vsftpd2</span><br><span class="line">[root@zutuanxue system]# netstat -antulp | grep vsftpd</span><br><span class="line">tcp6       0      0 :::21          :::*        LISTEN      7388/vsftpd         </span><br><span class="line">tcp6       0      0 :::2100        :::*        LISTEN      7392/vsftpd         </span><br></pre></td></tr></table></figure>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2023/09/27/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/Linux-%E6%9C%8D%E5%8A%A1%E4%BB%8B%E7%BB%8D/">Linux服务介绍</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2023/09/27/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AE%9D%E5%85%B8/Linux-%E6%9E%84%E5%BB%BA%E5%8F%AF%E8%A7%86%E5%8C%96%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/">构建可视化日志管理服务器</a></div></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
