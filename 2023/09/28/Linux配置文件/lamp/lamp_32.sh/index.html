<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>lamp_32.sh - 原点独白</title>

  
    <meta name="description" content="#!&#x2F;bin&#x2F;bashecho “Renew the sources for yum,please wait…”sleep 2#cd &#x2F;etc&#x2F;yum.repos.d &amp;&amp; mv CentOS-Base.repo CentOS-Base.repo.bak &amp;&amp; wget http:&#x2F;&#x2F;mirrors.163.com&#x2F;.help">
<meta property="og:type" content="article">
<meta property="og:title" content="lamp_32.sh">
<meta property="og:url" content="https://haozecloud.github.io/2023/09/28/Linux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/lamp/lamp_32.sh/index.html">
<meta property="og:site_name" content="原点独白">
<meta property="og:description" content="#!&#x2F;bin&#x2F;bashecho “Renew the sources for yum,please wait…”sleep 2#cd &#x2F;etc&#x2F;yum.repos.d &amp;&amp; mv CentOS-Base.repo CentOS-Base.repo.bak &amp;&amp; wget http:&#x2F;&#x2F;mirrors.163.com&#x2F;.help">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-09-27T18:33:23.000Z">
<meta property="article:modified_time" content="2023-09-28T07:19:07.257Z">
<meta property="article:author" content="Zhang Hao Ze">
<meta name="twitter:card" content="summary">
  
  
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://img1.imgtp.com/2023/09/25/3pQ59aAI.png">
  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://img1.imgtp.com/2023/09/25/3pQ59aAI.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">原点独白</div><div class="sub cap">微信公众号</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/images/">照片</a><a class="nav-item" href="/more/">日常</a></nav>
</header>


<div class="widgets">

<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">lamp_32.sh</span></div><div class="widget-body fs14"><div class="doc-tree active"></div></div></widget>



<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" placeholder="站内搜索"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://pd.qq.com/s/77potx4h8" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/QQ-2023-09-29.svg"/></a><a class="social" href="https://i.y.qq.com/n2/m/share/details/taoge.html?platform=11&appshare=android_qq&appversion=12070008&hosteuin=oinFoK4soe-lNn**&id=3144152480&ADTAG=wxfshare" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/qq音乐-2023-09-29.svg"/></a><a class="social" href="https://www.cnblogs.com/mant" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/linux-2023-09-29.svg"/></a><a class="social" href="https://alidocs.dingtalk.com/i/p/O5pXBPdVlgnMQG7Z" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cloud-1317067033.cos.ap-chengdu.myqcloud.com/images/钉钉-2023-09-29.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/Linux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">Linux配置文件</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/Linux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/lamp/">lamp</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-09-27T18:33:23.000Z">2023-09-28</time></div></div>

<article class='md-text content post'>
<h1 class="article-title"><span>lamp_32.sh</span></h1>
<p>#!&#x2F;bin&#x2F;bash<br>echo “Renew the sources for yum,please wait…”<br>sleep 2<br>#cd &#x2F;etc&#x2F;yum.repos.d &amp;&amp; mv CentOS-Base.repo CentOS-Base.repo.bak &amp;&amp; wget <a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS-Base-163.repo">http://mirrors.163.com/.help/CentOS-Base-163.repo</a><br>#echo “First,Update the system,Please wait…”<br>#yum -y update<br>echo “Now,install dependent libraries.Please waiting…”<br>sleep 2<br>yum -y install gcc gcc-c++ libtool ncurses ncurses-devel openssl openssl-devel curl curl-devel readline readline-devel bzip2 bzip2-devel fontconfig-devel sqlite sqlite-devel zlib zlib-devel<br>sourcedir&#x3D;”&#x2F;usr&#x2F;local&#x2F;src&#x2F;lnmp&#x2F;“</p>
<p>[ “$PWD” !&#x3D; “$sourcedir” ] &amp;&amp; cd $sourcedir</p>
<p>echo “Start the installation of libxml2…”<br>sleep 2<br>#tar zxvf libxml2-2.7.6.tar.gz &amp;&amp; cd libxml2-2.7.6<br>#ע�͵�configure�ļ��е�ĳ�У������&#x2F;bin&#x2F;rm: cannot remove &#96;libtoolT��: No such file or directory ��<br>#.&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1</p>
<p>#echo ‘OK,libxml2-2.7.6 has  been successfully installed!’<br>##########################<br>cd ..<br>echo “Start the installation of libiconv…”<br>sleep 2<br>tar zxvf libiconv-1.14.tar.gz &amp;&amp; cd libiconv-1.14 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libiconv-1.14 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of libxslt…”<br>sleep 2<br>tar zxvf libxslt-1.1.28.tar.gz &amp;&amp; cd libxslt-1.1.28 || exit 1<br>#ע�͵�configure�ļ��е�ĳ�У������&#x2F;bin&#x2F;rm: cannot remove &#96;libtoolT��: No such file or directory ��<br>sed -i ‘&#x2F;$RM “$cfgfile”&#x2F; s&#x2F;^&#x2F;#&#x2F;‘ configure<br>.&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libxslt-1.1.26 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of libmcrypt…”<br>sleep 2<br>tar zxvf libmcrypt-2.5.8.tar.gz &amp;&amp; cd libmcrypt-2.5.8 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libmcrypt-2.5.8 has  been successfully installed!’</p>
<p>echo “Start the installation of libltdl…”<br>sleep 2<br>cd libltdl &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F; –enable-ltdl-install &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libltdl has  been successfully installed!’</p>
<p>cd ..&#x2F;..&#x2F;<br>echo “Start the installation of mhash…”<br>sleep 2<br>tar jxvf mhash-0.9.9.9.tar.bz2 &amp;&amp; cd mhash-0.9.9.9 &amp;&amp; .&#x2F;configure &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,mhash-0.9.9.9 has  been successfully installed!’</p>
<p>echo “&#x2F;usr&#x2F;local&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf<br>ldconfig</p>
<p>cd ..<br>echo “Start the installation of mcrypt…”<br>sleep 2<br>tar zxvf mcrypt-2.6.8.tar.gz &amp;&amp; cd mcrypt-2.6.8  &amp;&amp; .&#x2F;configure &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,mcrypt-2.6.8 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of libevent…”<br>sleep 2<br>tar zxvf libevent-2.0.21-stable.tar.gz &amp;&amp; cd libevent-2.0.19-stable &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libevent-2.0.21 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of libpng…”<br>sleep 2<br>tar zxvf libpng-1.6.2.tar.gz &amp;&amp; cd libpng-1.6.2 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,libpng-1.6.2 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of jpeg…”<br>sleep 2<br>tar zxvf jpegsrc.v9.tar.gz &amp;&amp; cd jpeg-9 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;jpeg –enable-shared –enable-static &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,jpeg-v9 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of freetype…”<br>sleep 2<br>tar zxvf freetype-2.4.12.tar.gz &amp;&amp; cd freetype-2.4.12 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;freetype &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,freetype-2.4.12 has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of gd2…”<br>sleep 2<br>tar zxvf gd-2.0.35.tar.gz &amp;&amp; cd gd&#x2F;2.0.35 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;gd –with-zlib –with-png –with-jpeg&#x3D;&#x2F;usr&#x2F;local&#x2F;jpeg –with-freetype&#x3D;&#x2F;usr&#x2F;local&#x2F;freetype &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,gd-2.0.35 has  been successfully installed!’</p>
<p>cd ..&#x2F;..&#x2F;<br>echo “Start the installation of cmake…”<br>sleep 2<br>tar zxvf cmake-2.8.11.2.tar.gz &amp;&amp; cd cmake-2.8.11.2 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,cmake-2.8.11has  been successfully installed!’</p>
<p>cd ..<br>echo “Start the installation of mysql…”<br>sleep 2</p>
<p>tar zxvf mysql-5.6.12.tar.gz &amp;&amp; cd mysql-5.6.12 &amp;&amp; cmake . -DCMAKE_INSTALL_PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F; -DMYSQL_DATADIR&#x3D;&#x2F;data&#x2F;mysql&#x2F;data -DWITH_INNOBASE_STORAGE_ENGINE&#x3D;1 -DWITH_MYISAM_STORAGE_ENGINE&#x3D;1 -DWITH_MEMORY_STORAGE_ENGINE&#x3D;1 -DENABLED_LOCAL_INFILE&#x3D;1 -DMYSQL_TCP_PORT&#x3D;3306 -DEXTRA_CHARSETS&#x3D;all -DDEFAULT_CHARSET&#x3D;utf8 -DDEFAULT_COLLATION&#x3D;utf8_general_ci -DWITH_PARTITION_STORAGE_ENGINE&#x3D;1 -DMYSQL_UNIX_ADDR&#x3D;&#x2F;tmp&#x2F;mysql.sock -DWITH_DEBUG&#x3D;0  -DWITH_SSL&#x3D;yes -DSYSCONFDIR&#x3D;&#x2F;data&#x2F;mysql -DMYSQL_TCP_PORT&#x3D;3306 &amp;&amp; make &amp;&amp; make install || exit 1</p>
<p>echo ‘OK,MySQL-5.6.12 has  been successfully installed!’<br>sleep 2<br>echo “Prepare for start MySQL,Please wait….”<br>sleep 2<br>useradd -s &#x2F;sbin&#x2F;nologin www<br>useradd -s &#x2F;sbin&#x2F;nologin mysql<br>mkdir -p &#x2F;data&#x2F;mysql&#x2F;{data,binlog,relaylog}<br>chown -R mysql:mysql &#x2F;data&#x2F;mysql<br>touch &#x2F;data&#x2F;mysql&#x2F;my.cnf<br>echo -ne “[client]\ndefault-character-set&#x3D;gbk\nport &#x3D; 3306\nsocket &#x3D; &#x2F;tmp&#x2F;mysql.sock\n[mysqld]\ncharacter-set-server &#x3D; gbk\ncollation-server &#x3D; gbk_chinese_ci\n#replicate-ignore-db &#x3D; mysql\n#replicate-ignore-db &#x3D; test\n#replicate-ignore-db &#x3D; information_schema\nuser &#x3D; mysql\nport &#x3D; 3306\nsocket  &#x3D; &#x2F;tmp&#x2F;mysql.sock\nbasedir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql\ndatadir &#x3D; &#x2F;data&#x2F;mysql&#x2F;data\nexplicit_defaults_for_timestamp&#x3D;true\nlog-error &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql_error.log\npid-file &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql.pid\nopen_files_limit    &#x3D; 10240\nback_log &#x3D; 600\nmax_connections &#x3D; 5000\nmax_connect_errors &#x3D; 6000\ntable_cache &#x3D; 614\nexternal-locking &#x3D; FALSE\nmax_allowed_packet &#x3D; 32M\nsort_buffer_size &#x3D; 1M\njoin_buffer_size &#x3D; 1M\nthread_cache_size &#x3D; 300\nthread_concurrency &#x3D; 8\nquery_cache_size &#x3D; 512M\nquery_cache_limit &#x3D; 2M\nquery_cache_min_res_unit &#x3D; 2k\ndefault-storage-engine &#x3D; MyISAM\nthread_stack &#x3D; 192K\ntransaction_isolation &#x3D; READ-COMMITTED\ntmp_table_size &#x3D; 246M\nmax_heap_table_size &#x3D; 246M\nlong_query_time &#x3D; 3\nlog-slave-updates\nlog-bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;binlog&#x2F;binlog\nbinlog_cache_size &#x3D; 4M\nbinlog_format &#x3D; MIXED\nmax_binlog_cache_size &#x3D; 8M\nmax_binlog_size &#x3D; 1G\nexpire-logs-days &#x3D; 30\nrelay-log-index &#x3D; &#x2F;data&#x2F;mysql&#x2F;relaylog&#x2F;relaylog\nrelay-log-info-file &#x3D; &#x2F;data&#x2F;mysql&#x2F;relaylog&#x2F;relaylog\nrelay-log &#x3D; &#x2F;data&#x2F;mysql&#x2F;relaylog&#x2F;relaylog\nexpire_logs_days &#x3D; 30\nkey_buffer_size &#x3D; 256M\nread_buffer_size &#x3D; 1M\nread_rnd_buffer_size &#x3D; 16M\nbulk_insert_buffer_size &#x3D; 64M\nmyisam_sort_buffer_size &#x3D; 128M\nmyisam_max_sort_file_size &#x3D; 10G\nmyisam_repair_threads &#x3D; 1\n;myisam_recover\n\ninteractive_timeout &#x3D; 120\nwait_timeout &#x3D; 120\n\nskip-name-resolve\nslave-skip-errors &#x3D; 1032,1062,126,1114,1146,1048,1396\n\nserver-id &#x3D; 1\n\n;innodb_additional_mem_pool_size &#x3D; 16M\n;innodb_buffer_pool_size &#x3D; 512M\n;innodb_data_file_path &#x3D; ibdata1:256M:autoextend\n;innodb_file_io_threads &#x3D; 4\n;innodb_thread_concurrency &#x3D; 8\n;innodb_flush_log_at_trx_commit &#x3D; 2\n;innodb_log_buffer_size &#x3D; 16M\n;innodb_log_file_size &#x3D; 128M\n;innodb_log_files_in_group &#x3D; 3\n;innodb_max_dirty_pages_pct &#x3D; 90\n;innodb_lock_wait_timeout &#x3D; 120\n;innodb_file_per_table &#x3D; 0\n\nslow_query_log\nslow_query_log_file &#x3D; &#x2F;data&#x2F;mysql&#x2F;slow.log\nlong_query_time &#x3D; 1\nlog-queries-not-using-indexes\n\n[mysqldump]\nquick\nmax_allowed_packet &#x3D; 32M\n” &gt;&gt; &#x2F;data&#x2F;mysql&#x2F;my.cnf<br>ln -s &#x2F;data&#x2F;mysql&#x2F;my.cnf &#x2F;etc&#x2F;my.cnf<br>cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql* &#x2F;usr&#x2F;bin&#x2F; &amp;&amp; cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqld &amp;&amp; chmod +x &#x2F;etc&#x2F;init.d&#x2F;mysqld || exit 1<br>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;scripts&#x2F;mysql_install_db –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql<br>mysqld_safe –user&#x3D;mysql &amp;<br>killall mysqld<br>service mysqld start</p>
<p>#Apache<br>cd ..<br>echo “Start the installation of Apache…”<br>sleep 2<br>#apr</p>
<p>tar jxvf apr-1.4.8.tar.bz2 $$ cd apr-1.4.8<br>#ע�͵�configure�ļ��е�ĳ�У������&#x2F;bin&#x2F;rm: cannot remove &#96;libtoolT��: No such file or directory ��<br>sed -i ‘&#x2F;$RM “$cfgfile”&#x2F; s&#x2F;^&#x2F;#&#x2F;‘ configure<br>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;apr &amp;&amp; make &amp;&amp; make install || exit 1<br>cd ..<br>#apr-util<br>tar jxvf apr-util-1.5.2.tar.bz2  &amp;&amp; cd tar jxvf apr-util-1.5.2<br>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;apr-util –with-apr&#x3D;&#x2F;usr&#x2F;local&#x2F;apr&#x2F;bin&#x2F;apr-1-config  &amp;&amp; make &amp;&amp; make install || exit 1<br>#pcre<br>cd ..<br>echo “Start the installation of pcre…”<br>tar jxvf pcre-8.33.tar.bz2 &amp;&amp; cd pcre-8.33<br>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;pcre &amp;&amp; make &amp;&amp; make install || exit 1<br>echo ‘OK,pcre-8.33 has  been successfully installed!’<br>cd ..</p>
<p>sleep 2<br>tar zxvf httpd-2.4.6.tar.gz &amp;&amp; cd httpd-2.4.6 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;apache2 –sysconfdir&#x3D;&#x2F;etc&#x2F;httpd –with-apr&#x3D;&#x2F;usr&#x2F;local&#x2F;apr&#x2F;bin&#x2F;apr-1-config –with-apr-util&#x3D;&#x2F;usr&#x2F;local&#x2F;apr-util&#x2F;bin&#x2F;apu-1-config  –with-pcre&#x3D;&#x2F;usr&#x2F;local&#x2F;pcre&#x2F; –enable-mods-shared&#x3D;most  –enable-rewirte –enable-so –enable-ssl&#x3D;static –with-ssl  –enable-proxy&#x3D;shared –enable-proxy-balancer&#x3D;shared –enable-proxy-http&#x3D;shared  –enable-cache –enable-disk-cache –enable-mem-cache –enable-file-cache  &amp;&amp; make &amp;&amp; make install || exit 1<br>if [ ! -d &#x2F;data&#x2F;logs ];then<br>mkdir -p &#x2F;data&#x2F;logs&#x2F;{error,access} #apache��־���Ŀ¼<br>fi<br>echo “OK,apache-2.4.6 has  been successfully installed!”<br>sleep 2<br>#����PHP�汾�Ըýű����ʵ��޸�<br>#PHP-5.3.27<br>cd ..<br>echo “Start the installation of php…”<br>sleep 2</p>
<p>tar zxvf php-5.3.27.tar.gz &amp;&amp; cd php-5.3.27 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php  –with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc –with-apxs2&#x3D;&#x2F;usr&#x2F;local&#x2F;apache2&#x2F;bin&#x2F;apxs –with-libxml-dir –with-iconv-dir –with-png-dir –with-jpeg-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;jpeg –with-zlib –with-gd&#x3D;&#x2F;usr&#x2F;local&#x2F;gd –with-freetype-dir&#x3D;&#x2F;usr&#x2F;local&#x2F;freetype –with-mcrypt –with-mhash –enable-gd-native-ttf  –with-readline –with-curl –with-bz2 –with-mysql&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –with-mysqli&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql_config –with-openssl-dir –without-pear  –enable-mbstring –enable-soap –enable-xml –enable-pdo –enable-ftp  –enable-zip –enable-bcmath &amp;&amp; make &amp;&amp; make install || exit 1<br>if [ ! -d &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc ];then<br>mkdir &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc<br>fi<br>cp ..&#x2F;php.ini &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F; &amp;&amp; mkdir &#x2F;usr&#x2F;local&#x2F;php&#x2F;ext<br>mkdir -p &#x2F;data&#x2F;logs&#x2F;php #��־���Ŀ¼<br>echo  ‘OK,PHP-5.3.27 has  been successfully installed!’<br>sleep 2</p>
<p>cd ..<br>echo “Start install memcache extension…”<br>#���php�汾Ϊ5.2����memcacheʹ��2.2.6�汾���������汾���⵼��php�޷�����memcachģ�顣<br>sleep 2<br>tar zxvf memcache-3.0.6.tgz &amp;&amp; cd memcache-3.0.6 &amp;&amp; &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize &amp;&amp; .&#x2F;configure –enable-memcache –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config &amp;&amp; make &amp;&amp; make install || exit 1<br>cp &#x2F;usr&#x2F;local&#x2F;php&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20090626&#x2F;memcache.so &#x2F;usr&#x2F;local&#x2F;php&#x2F;ext&#x2F;<br>echo  “OK,Memcache-3.0.6 installed successfully!”<br>sleep 2</p>
<p>#cd ..<br>#echo “Start install ImageMagick…”<br>#sleep 2<br>#tar zxvf ImageMagick-6.6.9-10.tar.gz &amp;&amp; cd ImageMagick-6.6.9-10 &amp;&amp; .&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;imagemagick &amp;&amp; make &amp;&amp; make install || exit 1<br>#echo “&#x2F;usr&#x2F;local&#x2F;imagemagick&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf &amp;&amp; ldconfig<br>#echo “OK,ImageMagick-6.6.9-10 has been installed successfully!”<br>#sleep 2</p>
<p>#cd ..<br>#echo “Start install imagick for php …”<br>#tar zxvf imagick-3.0.1.tgz &amp;&amp; cd imagick-3.0.1 &amp;&amp; &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize &amp;&amp; .&#x2F;configure –with-imagick&#x3D;&#x2F;usr&#x2F;local&#x2F;imagemagick –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config &amp;&amp; make &amp;&amp; make install || exit 1<br>#cp &#x2F;usr&#x2F;local&#x2F;php&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20060613&#x2F;imagick.so  &#x2F;usr&#x2F;local&#x2F;php&#x2F;ext&#x2F;<br>#echo “OK,imagick-3.0.1 for php has been installed successfully!”<br>#sleep 2</p>
<p>cd ..<br>echo “Start install PDO_MYSQL …”<br>tar zxvf PDO_MYSQL-1.0.2.tgz &amp;&amp; cd PDO_MYSQL-1.0.2 &amp;&amp; &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize &amp;&amp; .&#x2F;configure –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config –with-pdo-mysql&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql &amp;&amp; make &amp;&amp; make install || exit 1<br>cp modules&#x2F;pdo_mysql.so &#x2F;usr&#x2F;local&#x2F;php&#x2F;ext&#x2F;<br>echo “OK,PDO_MYSQL-1.0.2 has been installed successfully!”<br>sleep 2</p>
<p>cd ..<br>echo “Start install APC …”<br>tar zxvf APC-3.1.9.tgz &amp;&amp; cd APC-3.1.9<br>&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize<br>.&#x2F;configure –enable-apc –with-apc-mmap –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config &amp;&amp; make &amp;&amp; make install<br>cp &#x2F;usr&#x2F;local&#x2F;php&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20090626&#x2F;apc.so &#x2F;usr&#x2F;local&#x2F;php&#x2F;ext&#x2F;<br>#echo -ne “[APC]\nextension &#x3D; &quot;apc.so&quot;\napc.enabled &#x3D; 1\napc.cache_by_default &#x3D; on\napc.shm_size &#x3D; 32M\napc.ttl &#x3D; 600\napc.user_ttl &#x3D; 600\napc.write_lock &#x3D; on” &gt;&gt; &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini<br>echo -ne “APC-3.1.9 has been installed successfully!”<br>cd ..<br>sleep 2</p>
<p>#httpd auto runing<br>cp &#x2F;usr&#x2F;local&#x2F;apache2&#x2F;bin&#x2F;apachectl &#x2F;etc&#x2F;init.d&#x2F;httpd<br>sed -i ‘2a # chkconfig: 2345 65 37\</p>
<h1 id="description-apache-service-manager-’-etc-init-d-httpd"><a href="#description-apache-service-manager-’-etc-init-d-httpd" class="headerlink" title="description: apache service manager.’ &#x2F;etc&#x2F;init.d&#x2F;httpd"></a>description: apache service manager.’ &#x2F;etc&#x2F;init.d&#x2F;httpd</h1><p>chkconfig –level 3 httpd on</p>
<p>#http_conf<br>mv &#x2F;etc&#x2F;httpd&#x2F;httpd.conf &#x2F;etc&#x2F;httpd&#x2F;httpd.conf.default<br>mv &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-default.conf &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-default.conf.default<br>mv &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-vhosts.conf &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-vhosts.conf.default<br>mv &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-mpm.conf &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-mpm.conf.default<br>cp http-conf&#x2F;httpd.conf &#x2F;etc&#x2F;httpd&#x2F;<br>cp http-conf&#x2F;extra&#x2F;* &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F; </p>
<p>#apache_cutlog<br>tar zxvf cronolog-1.6.2.tar.gz &amp;&amp; cd cronolog-1.6.2 &amp;&amp; .&#x2F;configure &amp;&amp; make &amp;&amp; make install || exit 1</p>
<p>cd ..<br>#ulimit<br>sed -i ‘$i *                -       nofile          65535\</p>
<ul>
<li><pre><code>           soft    core            0\
</code></pre>
</li>
<li><pre><code>           hard    core            0&#39; /etc/security/limits.conf
</code></pre>
</li>
</ul>
<p>#sysctl.conf<br>cat sysctl.conf &gt;&gt; &#x2F;etc&#x2F;sysctl.conf &amp;&amp; sysctl -p</p>
<p>#history��������ʱ��<br>sed -i ‘&#x2F;HISTSIZE&#x2F;a HISTTIMEFORMAT&#x3D;”%Y%m%d-%H%M%S:”‘  &#x2F;etc&#x2F;profile<br>sed -i ‘&#x2F;export&#x2F; s&#x2F;$&#x2F; HISTTIMEFORMAT&#x2F;‘ &#x2F;etc&#x2F;profile</p>
<p>#su&#x2F;sudo<br>#��wheel���Ա����ʹ��su<br>sed -i ‘&#x2F;required&#x2F; s&#x2F;^#&#x2F;&#x2F;‘ &#x2F;etc&#x2F;pam.d&#x2F;su<br>echo “SU_WHEEL_ONLY  yes” &gt;&gt; &#x2F;etc&#x2F;login.defs</p>
<p>#sudo<br>#Cmnd_Alias MANAGER &#x3D; &#x2F;sbin&#x2F;route, &#x2F;sbin&#x2F;ifconfig, &#x2F;bin&#x2F;ping, &#x2F;sbin&#x2F;iptables, &#x2F;sbin&#x2F;service, &#x2F;sbin&#x2F;chkconfig, &#x2F;bin&#x2F;chmod, &#x2F;bin&#x2F;chown, &#x2F;bin&#x2F;chgrp<br>#User_Alias ADMINS &#x3D; </p>
<p>#root    ALL&#x3D;(ALL)     ALL<br>#ADMINS  ALL&#x3D;(ALL)     MANAGER</p>
<p>#document_root<br>if [ ! -d &#x2F;data&#x2F;www ];then<br>mkdir -p &#x2F;data&#x2F;www<br>fi<br>chown www:www &#x2F;data&#x2F;www &amp;&amp; touch &#x2F;data&#x2F;www&#x2F;index.php &amp;&amp; echo -ne ‘<?php\nphpinfo();\n?>‘ &gt; &#x2F;data&#x2F;www&#x2F;index.php<br>sleep 2</p>
<p>echo -ne “OK,That is all,Thanks for using,Bye!\n”<br>#10��֮������<br>for i in $(seq 10| tac)<br>do<br>    echo -ne “\aThe system will reboot after $i seconds…\r”<br>    sleep 1<br>done<br>echo<br>shutdown -r now</p>



<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2023/09/28/Linux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/kvm/rhel-debuginfo.repo/">rhel-debuginfo.repo</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2023/09/28/Linux%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/lamp/lamp_64.sh/">lamp_64.sh</a></div></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
